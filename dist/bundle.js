!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,null,[{key:"httpGetAllSources",value:function(){return fetch(this.URL_ALL_SOURCES,this.requestOptions).then(function(e){return e.json()})}},{key:"httpGetArticlesSource",value:function(e,t){var n="".concat(this.URL_SOURCE,"/?sources=").concat(e,"&pageSize=").concat(t);return fetch(n,this.requestOptions).then(function(e){return e.json()})}},{key:"API_KEY",get:function(){return"44e9b020293440f680fab34b192b8dd0"}},{key:"URL_ALL_SOURCES",get:function(){return"https://newsapi.org/v1/sources"}},{key:"URL_SOURCE",get:function(){return"https://newsapi.org/v2/everything"}},{key:"requestOptions",get:function(){return{method:"GET",headers:{"X-Api-Key":this.API_KEY}}}}]),e}();function c(e){var t=e.tagName,n=e.innerText,r=e.innerHTML,o=e.className,c=e.attrs,i=document.createElement(t);return o&&i.classList.add(o),n&&(i.innerText=n),r&&(i.innerHTML=r),c&&Object.keys(c).forEach(function(e){i.setAttribute(e,c[e])}),i}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nodeSourceContent=document.querySelector(t),this.articlesContainer=null}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"createArticles",value:function(){var e=new DocumentFragment,t=c({tagName:"div",className:"source-content__articles"});return this.articlesContainer.forEach(function(e){var n=new Date(e.publishedAt).toLocaleString(),r=c({tagName:"article",className:"source-article",innerHTML:'\n          <img class="source-article__img" src="'.concat(e.urlToImage,'" alt="Image news" width="180" height="140">\n          <h3 class="source-article__title">').concat(e.title,'</h3>\n          <p class="source-article__description">').concat(e.description,'</p>\n          <span class="source-article__date">').concat(n,'</span>\n          <a href="').concat(e.url,'" target="_blank" class="source-article__link">See more</a>')});t.appendChild(r)}),e.appendChild(t),e}},{key:"redirectArticles",value:function(e,t){var n=this;this.nodeSourceContent.querySelector(".source-content__articles").innerHTML="Please wait...",o.httpGetArticlesSource(e,t).then(function(e){var t=e.articles;n.articles=t,n.viewNameSourceContent(),n.viewArticles()})}},{key:"viewArticles",value:function(){var e=this.nodeSourceContent.querySelector(".source-content__articles"),t=this.createArticles();e.replaceWith(t)}},{key:"viewNameSourceContent",value:function(){this.nodeSourceContent.querySelector(".source-content__author").innerText=this.articlesContainer[0].source.name}},{key:"articles",set:function(e){this.articlesContainer=e}}]),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nodeFilterSources=document.querySelector(t),this.countNews=this.countNews,this.nodeFilterSources.querySelector(".filter-sources__range").onchange=function(e){this.countNews=e.target.value;var t=new u(".source-content"),n=new h(".all-sources").idCurrentSource;t.redirectArticles(n,this.countNews)}.bind(this)}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(e,[{key:"countNews",set:function(e){this.nodeFilterSources.querySelector(".filter-sources__value").innerText=e},get:function(){var e=this.nodeFilterSources.querySelector(".filter-sources__range").value;return Number(e)}}]),e}();function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nodeSources=document.querySelector(t),this.sourcesContainer=null,this.curentNode=null,document.querySelector(t).onclick=function(e){var t=e.target;if("LI"===t.tagName){var n=t.getAttribute("data-id-source"),r=new s(".filter-sources").countNews,o=new u(".source-content");this.clickCurentNode=t,o.redirectArticles(n,r)}}.bind(this)}return f(e,null,[{key:"NAME_CLASS_CURENT_NODE",get:function(){return"all-sources__curent-item"}},{key:"DATA_ID_SOURCE",get:function(){return"data-id-source"}}]),f(e,[{key:"createSources",value:function(){var t=new DocumentFragment;return this.sourcesContainer.forEach(function(n){var r=c({tagName:"li",innerText:n.name,className:"all-sources__item",attrs:function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e.DATA_ID_SOURCE,n.id)});t.appendChild(r)}),t}},{key:"viewSources",value:function(){var e=this.createSources();this.nodeSources.appendChild(e)}},{key:"sources",set:function(e){this.sourcesContainer=e}},{key:"clickCurentNode",set:function(t){this.curentNode&&this.curentNode.classList.remove(e.NAME_CLASS_CURENT_NODE),this.curentNode=t,this.curentNode.classList.add(e.NAME_CLASS_CURENT_NODE)}},{key:"idCurrentSource",get:function(){return this.nodeSources.querySelector(".".concat(e.NAME_CLASS_CURENT_NODE)).getAttribute(e.DATA_ID_SOURCE)}}]),e}();o.httpGetAllSources().then(function(e){var t=e.sources,n=new h(".all-sources__list"),r=new u(".source-content"),o=new s(".filter-sources").countNews;n.sources=t,n.viewSources(),n.clickCurentNode=n.nodeSources.firstElementChild,r.redirectArticles(t[0].id,o)})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL25ld3MtYXBpL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9qcy91dGlscy9ub2RlLXV0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMvc291cmNlLWNvbnRlbnQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMvZmlsdGVyLXNvdXJjZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMvZmlsdGVyLXNvdXJjZXMvZXZlbnQtZmlsdGVyLXNvdXJjZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMvYWxsLXNvdXJjZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMvYWxsLXNvdXJjZXMvZXZlbnRzLWFsbC1zb3VyY2VzLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9hcHAuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJOZXdzQXBpIiwiZmV0Y2giLCJ0aGlzIiwiVVJMX0FMTF9TT1VSQ0VTIiwicmVxdWVzdE9wdGlvbnMiLCJ0aGVuIiwicmVzcG9uY2UiLCJqc29uIiwiaWRTb3VyY2UiLCJudW1iZXJBcnRpY2xlcyIsInF1ZXJ5VVJMIiwiY29uY2F0IiwiVVJMX1NPVVJDRSIsIm1ldGhvZCIsImhlYWRlcnMiLCJYLUFwaS1LZXkiLCJBUElfS0VZIiwiY3JlYXRlTm9kZSIsIl9yZWYiLCJ0YWdOYW1lIiwiaW5uZXJUZXh0IiwiaW5uZXJIVE1MIiwiY2xhc3NOYW1lIiwiYXR0cnMiLCJub2RlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwia2V5cyIsImZvckVhY2giLCJhdHRyIiwic2V0QXR0cmlidXRlIiwiU291cmNlQ29udGVudCIsIm5vZGVTZWxlY3RvciIsInNvdXJjZV9jb250ZW50X2NsYXNzQ2FsbENoZWNrIiwibm9kZVNvdXJjZUNvbnRlbnQiLCJxdWVyeVNlbGVjdG9yIiwiYXJ0aWNsZXNDb250YWluZXIiLCJmcmFnbWVudENvbnRhaW5lckFydGljbGVzIiwiRG9jdW1lbnRGcmFnbWVudCIsIm5vZGVEaXYiLCJhcnRpY2xlIiwiZGF0ZSIsIkRhdGUiLCJwdWJsaXNoZWRBdCIsInRvTG9jYWxlU3RyaW5nIiwibm9kZUFydGljbGUiLCJ1cmxUb0ltYWdlIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInVybCIsImFwcGVuZENoaWxkIiwiY291bnROZXdzIiwiX3RoaXMiLCJodHRwR2V0QXJ0aWNsZXNTb3VyY2UiLCJhcnRpY2xlcyIsInZpZXdOYW1lU291cmNlQ29udGVudCIsInZpZXdBcnRpY2xlcyIsIm5vZGVBcnRpY2xlcyIsImZyYWdtZW50QXJ0aWNsZXMiLCJjcmVhdGVBcnRpY2xlcyIsInJlcGxhY2VXaXRoIiwic291cmNlIiwiRmlsdGVyU291cmNlcyIsImZpbHRlcl9zb3VyY2VzX2NsYXNzQ2FsbENoZWNrIiwibm9kZUZpbHRlclNvdXJjZXMiLCJvbmNoYW5nZSIsImV2ZW50IiwidGFyZ2V0Iiwic291cmNlQ29udGVudCIsImlkQ3VycmVudFNvdXJjZSIsIkFsbFNvdXJjZXMiLCJyZWRpcmVjdEFydGljbGVzIiwiY291bnQiLCJOdW1iZXIiLCJhbGxfc291cmNlc19jbGFzc0NhbGxDaGVjayIsIm5vZGVTb3VyY2VzIiwic291cmNlc0NvbnRhaW5lciIsImN1cmVudE5vZGUiLCJvbmNsaWNrIiwiY2xpY2tFbGVtIiwiZ2V0QXR0cmlidXRlIiwiY2xpY2tDdXJlbnROb2RlIiwiZnJhZ21lbnRDb250YWluZXJMaXN0Iiwibm9kZUxJIiwiX2RlZmluZVByb3BlcnR5IiwiREFUQV9JRF9TT1VSQ0UiLCJpZCIsImZyYWdtZW50U291cmNlcyIsImNyZWF0ZVNvdXJjZXMiLCJzb3VyY2VzIiwicmVtb3ZlIiwiTkFNRV9DTEFTU19DVVJFTlRfTk9ERSIsImh0dHBHZXRBbGxTb3VyY2VzIiwiYWxsU291cmNlcyIsInZpZXdTb3VyY2VzIiwiZmlyc3RFbGVtZW50Q2hpbGQiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIs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IjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5ld3NBcGkge1xyXG4gIHN0YXRpYyBnZXQgQVBJX0tFWSgpIHtcclxuICAgIHJldHVybiAnNDRlOWIwMjAyOTM0NDBmNjgwZmFiMzRiMTkyYjhkZDAnO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCBVUkxfQUxMX1NPVVJDRVMoKSB7XHJcbiAgICByZXR1cm4gJ2h0dHBzOi8vbmV3c2FwaS5vcmcvdjEvc291cmNlcyc7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IFVSTF9TT1VSQ0UoKSB7XHJcbiAgICByZXR1cm4gJ2h0dHBzOi8vbmV3c2FwaS5vcmcvdjIvZXZlcnl0aGluZyc7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IHJlcXVlc3RPcHRpb25zKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdYLUFwaS1LZXknOiB0aGlzLkFQSV9LRVksXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGh0dHBHZXRBbGxTb3VyY2VzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuVVJMX0FMTF9TT1VSQ0VTLCB0aGlzLnJlcXVlc3RPcHRpb25zKVxyXG4gICAgICAudGhlbihyZXNwb25jZSA9PiByZXNwb25jZS5qc29uKCkpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGh0dHBHZXRBcnRpY2xlc1NvdXJjZShpZFNvdXJjZSwgbnVtYmVyQXJ0aWNsZXMpIHtcclxuICAgIGNvbnN0IHF1ZXJ5VVJMID0gYCR7dGhpcy5VUkxfU09VUkNFfS8/c291cmNlcz0ke2lkU291cmNlfSZwYWdlU2l6ZT0ke251bWJlckFydGljbGVzfWA7XHJcbiAgICByZXR1cm4gZmV0Y2gocXVlcnlVUkwsIHRoaXMucmVxdWVzdE9wdGlvbnMpXHJcbiAgICAgIC50aGVuKHJlc3BvbmNlID0+IHJlc3BvbmNlLmpzb24oKSk7XHJcbiAgfVxyXG59XHJcbiIsIlxyXG5mdW5jdGlvbiBjcmVhdGVOb2RlKHtcclxuICB0YWdOYW1lLCBpbm5lclRleHQsIGlubmVySFRNTCwgY2xhc3NOYW1lLCBhdHRycyxcclxufSkge1xyXG4gIGNvbnN0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xyXG5cclxuICBpZiAoY2xhc3NOYW1lKSB7XHJcbiAgICBub2RlLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcclxuICB9XHJcblxyXG4gIGlmIChpbm5lclRleHQpIHtcclxuICAgIG5vZGUuaW5uZXJUZXh0ID0gaW5uZXJUZXh0O1xyXG4gIH1cclxuXHJcbiAgaWYgKGlubmVySFRNTCkge1xyXG4gICAgbm9kZS5pbm5lckhUTUwgPSBpbm5lckhUTUw7XHJcbiAgfVxyXG5cclxuICBpZiAoYXR0cnMpIHtcclxuICAgIE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKChhdHRyKSA9PiB7XHJcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJzW2F0dHJdKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG5vZGU7XHJcbn1cclxuXHJcbmV4cG9ydCB7XHJcbiAgY3JlYXRlTm9kZSxcclxufTtcclxuIiwiaW1wb3J0IE5ld3NBcGkgZnJvbSAnLi4vLi4vbmV3cy1hcGknO1xyXG5pbXBvcnQgeyBjcmVhdGVOb2RlIH0gZnJvbSAnLi4vLi4vdXRpbHMvbm9kZS11dGlsJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNvdXJjZUNvbnRlbnQge1xyXG4gIGNvbnN0cnVjdG9yKG5vZGVTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5ub2RlU291cmNlQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iobm9kZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuYXJ0aWNsZXNDb250YWluZXIgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgc2V0IGFydGljbGVzKGFydGljbGVzKSB7XHJcbiAgICB0aGlzLmFydGljbGVzQ29udGFpbmVyID0gYXJ0aWNsZXM7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVBcnRpY2xlcygpIHtcclxuICAgIGNvbnN0IGZyYWdtZW50Q29udGFpbmVyQXJ0aWNsZXMgPSBuZXcgRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgY29uc3Qgbm9kZURpdiA9IGNyZWF0ZU5vZGUoe1xyXG4gICAgICB0YWdOYW1lOiAnZGl2JyxcclxuICAgICAgY2xhc3NOYW1lOiAnc291cmNlLWNvbnRlbnRfX2FydGljbGVzJyxcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuYXJ0aWNsZXNDb250YWluZXIuZm9yRWFjaCgoYXJ0aWNsZSkgPT4ge1xyXG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoYXJ0aWNsZS5wdWJsaXNoZWRBdCkudG9Mb2NhbGVTdHJpbmcoKTtcclxuICAgICAgY29uc3Qgbm9kZUFydGljbGUgPSBjcmVhdGVOb2RlKHtcclxuICAgICAgICB0YWdOYW1lOiAnYXJ0aWNsZScsXHJcbiAgICAgICAgY2xhc3NOYW1lOiAnc291cmNlLWFydGljbGUnLFxyXG4gICAgICAgIGlubmVySFRNTDogYFxyXG4gICAgICAgICAgPGltZyBjbGFzcz1cInNvdXJjZS1hcnRpY2xlX19pbWdcIiBzcmM9XCIke2FydGljbGUudXJsVG9JbWFnZX1cIiBhbHQ9XCJJbWFnZSBuZXdzXCIgd2lkdGg9XCIxODBcIiBoZWlnaHQ9XCIxNDBcIj5cclxuICAgICAgICAgIDxoMyBjbGFzcz1cInNvdXJjZS1hcnRpY2xlX190aXRsZVwiPiR7YXJ0aWNsZS50aXRsZX08L2gzPlxyXG4gICAgICAgICAgPHAgY2xhc3M9XCJzb3VyY2UtYXJ0aWNsZV9fZGVzY3JpcHRpb25cIj4ke2FydGljbGUuZGVzY3JpcHRpb259PC9wPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzb3VyY2UtYXJ0aWNsZV9fZGF0ZVwiPiR7ZGF0ZX08L3NwYW4+XHJcbiAgICAgICAgICA8YSBocmVmPVwiJHthcnRpY2xlLnVybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIiBjbGFzcz1cInNvdXJjZS1hcnRpY2xlX19saW5rXCI+U2VlIG1vcmU8L2E+YCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBub2RlRGl2LmFwcGVuZENoaWxkKG5vZGVBcnRpY2xlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGZyYWdtZW50Q29udGFpbmVyQXJ0aWNsZXMuYXBwZW5kQ2hpbGQobm9kZURpdik7XHJcblxyXG4gICAgcmV0dXJuIGZyYWdtZW50Q29udGFpbmVyQXJ0aWNsZXM7XHJcbiAgfVxyXG5cclxuICByZWRpcmVjdEFydGljbGVzKGlkU291cmNlLCBjb3VudE5ld3MpIHtcclxuICAgIGNvbnN0IG5vZGVBcnRpY2xlcyA9IHRoaXMubm9kZVNvdXJjZUNvbnRlbnQucXVlcnlTZWxlY3RvcignLnNvdXJjZS1jb250ZW50X19hcnRpY2xlcycpO1xyXG4gICAgbm9kZUFydGljbGVzLmlubmVySFRNTCA9ICdQbGVhc2Ugd2FpdC4uLic7XHJcblxyXG4gICAgTmV3c0FwaS5odHRwR2V0QXJ0aWNsZXNTb3VyY2UoaWRTb3VyY2UsIGNvdW50TmV3cykudGhlbigoeyBhcnRpY2xlcyB9KSA9PiB7XHJcbiAgICAgIHRoaXMuYXJ0aWNsZXMgPSBhcnRpY2xlcztcclxuICAgICAgdGhpcy52aWV3TmFtZVNvdXJjZUNvbnRlbnQoKTtcclxuICAgICAgdGhpcy52aWV3QXJ0aWNsZXMoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdmlld0FydGljbGVzKCkge1xyXG4gICAgY29uc3Qgbm9kZUFydGljbGVzID0gdGhpcy5ub2RlU291cmNlQ29udGVudC5xdWVyeVNlbGVjdG9yKCcuc291cmNlLWNvbnRlbnRfX2FydGljbGVzJyk7XHJcbiAgICBjb25zdCBmcmFnbWVudEFydGljbGVzID0gdGhpcy5jcmVhdGVBcnRpY2xlcygpO1xyXG5cclxuICAgIG5vZGVBcnRpY2xlcy5yZXBsYWNlV2l0aChmcmFnbWVudEFydGljbGVzKTtcclxuICB9XHJcblxyXG4gIHZpZXdOYW1lU291cmNlQ29udGVudCgpIHtcclxuICAgIGNvbnN0IG5vZGVOYW1lU291cmNlQ29udGVudCA9IHRoaXMubm9kZVNvdXJjZUNvbnRlbnQucXVlcnlTZWxlY3RvcignLnNvdXJjZS1jb250ZW50X19hdXRob3InKTtcclxuICAgIG5vZGVOYW1lU291cmNlQ29udGVudC5pbm5lclRleHQgPSB0aGlzLmFydGljbGVzQ29udGFpbmVyWzBdLnNvdXJjZS5uYW1lO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBFdmVudEhhbmRsZXJzIGZyb20gJy4vZXZlbnQtZmlsdGVyLXNvdXJjZXMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlsdGVyU291cmNlcyB7XHJcbiAgY29uc3RydWN0b3Iobm9kZVNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLm5vZGVGaWx0ZXJTb3VyY2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihub2RlU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5jb3VudE5ld3MgPSB0aGlzLmNvdW50TmV3cztcclxuXHJcbiAgICB0aGlzLm5vZGVGaWx0ZXJTb3VyY2VzLnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXItc291cmNlc19fcmFuZ2UnKVxyXG4gICAgICAub25jaGFuZ2UgPSBFdmVudEhhbmRsZXJzLmhhbmRsZXJDaGFuZ2VSYW5nZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgc2V0IGNvdW50TmV3cyhjb3VudE5ld3MpIHtcclxuICAgIGNvbnN0IG5vZGVGaWx0ZXJTb3VyY2VzVmFsdWUgPSB0aGlzLm5vZGVGaWx0ZXJTb3VyY2VzXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyLXNvdXJjZXNfX3ZhbHVlJyk7XHJcblxyXG4gICAgbm9kZUZpbHRlclNvdXJjZXNWYWx1ZS5pbm5lclRleHQgPSBjb3VudE5ld3M7XHJcbiAgfVxyXG5cclxuICBnZXQgY291bnROZXdzKCkge1xyXG4gICAgY29uc3QgY291bnQgPSB0aGlzLm5vZGVGaWx0ZXJTb3VyY2VzXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyLXNvdXJjZXNfX3JhbmdlJykudmFsdWU7XHJcbiAgICByZXR1cm4gTnVtYmVyKGNvdW50KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFNvdXJjZUNvbnRlbnQgZnJvbSAnLi4vc291cmNlLWNvbnRlbnQnO1xyXG5pbXBvcnQgQWxsU291cmNlcyBmcm9tICcuLi9hbGwtc291cmNlcyc7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVyQ2hhbmdlUmFuZ2UoZXZlbnQpIHtcclxuICB0aGlzLmNvdW50TmV3cyA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuXHJcbiAgY29uc3Qgc291cmNlQ29udGVudCA9IG5ldyBTb3VyY2VDb250ZW50KCcuc291cmNlLWNvbnRlbnQnKTtcclxuICBjb25zdCB7IGlkQ3VycmVudFNvdXJjZSB9ID0gbmV3IEFsbFNvdXJjZXMoJy5hbGwtc291cmNlcycpO1xyXG5cclxuICBzb3VyY2VDb250ZW50LnJlZGlyZWN0QXJ0aWNsZXMoaWRDdXJyZW50U291cmNlLCB0aGlzLmNvdW50TmV3cyk7XHJcbn1cclxuXHJcbmV4cG9ydCB7XHJcbiAgaGFuZGxlckNoYW5nZVJhbmdlLFxyXG59O1xyXG4iLCJpbXBvcnQgeyBjcmVhdGVOb2RlIH0gZnJvbSAnLi4vLi4vdXRpbHMvbm9kZS11dGlsJztcclxuaW1wb3J0ICogYXMgRXZlbnRIYW5kbGVycyBmcm9tICcuL2V2ZW50cy1hbGwtc291cmNlcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbGxTb3VyY2VzIHtcclxuICBzdGF0aWMgZ2V0IE5BTUVfQ0xBU1NfQ1VSRU5UX05PREUoKSB7XHJcbiAgICByZXR1cm4gJ2FsbC1zb3VyY2VzX19jdXJlbnQtaXRlbSc7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IERBVEFfSURfU09VUkNFKCkge1xyXG4gICAgcmV0dXJuICdkYXRhLWlkLXNvdXJjZSc7XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3Rvcihub2RlU2VsZWN0b3IpIHtcclxuICAgIHRoaXMubm9kZVNvdXJjZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5vZGVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLnNvdXJjZXNDb250YWluZXIgPSBudWxsO1xyXG4gICAgdGhpcy5jdXJlbnROb2RlID0gbnVsbDtcclxuXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5vZGVTZWxlY3RvcilcclxuICAgICAgLm9uY2xpY2sgPSBFdmVudEhhbmRsZXJzLmhhbmRsZXJDbGljay5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgc2V0IHNvdXJjZXMoc291cmNlcykge1xyXG4gICAgdGhpcy5zb3VyY2VzQ29udGFpbmVyID0gc291cmNlcztcclxuICB9XHJcblxyXG4gIHNldCBjbGlja0N1cmVudE5vZGUoY3VyZW50Tm9kZSkge1xyXG4gICAgaWYgKHRoaXMuY3VyZW50Tm9kZSkge1xyXG4gICAgICB0aGlzLmN1cmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZShBbGxTb3VyY2VzLk5BTUVfQ0xBU1NfQ1VSRU5UX05PREUpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jdXJlbnROb2RlID0gY3VyZW50Tm9kZTtcclxuICAgIHRoaXMuY3VyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKEFsbFNvdXJjZXMuTkFNRV9DTEFTU19DVVJFTlRfTk9ERSk7XHJcbiAgfVxyXG5cclxuICBnZXQgaWRDdXJyZW50U291cmNlKCkge1xyXG4gICAgY29uc3QgY3VycmVudE5vZGUgPSB0aGlzLm5vZGVTb3VyY2VzXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKGAuJHtBbGxTb3VyY2VzLk5BTUVfQ0xBU1NfQ1VSRU5UX05PREV9YCk7XHJcblxyXG4gICAgcmV0dXJuIGN1cnJlbnROb2RlLmdldEF0dHJpYnV0ZShBbGxTb3VyY2VzLkRBVEFfSURfU09VUkNFKTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZVNvdXJjZXMoKSB7XHJcbiAgICBjb25zdCBmcmFnbWVudENvbnRhaW5lckxpc3QgPSBuZXcgRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuICAgIHRoaXMuc291cmNlc0NvbnRhaW5lci5mb3JFYWNoKChzb3VyY2UpID0+IHtcclxuICAgICAgY29uc3Qgbm9kZUxJID0gY3JlYXRlTm9kZSh7XHJcbiAgICAgICAgdGFnTmFtZTogJ2xpJyxcclxuICAgICAgICBpbm5lclRleHQ6IHNvdXJjZS5uYW1lLFxyXG4gICAgICAgIGNsYXNzTmFtZTogJ2FsbC1zb3VyY2VzX19pdGVtJyxcclxuICAgICAgICBhdHRyczogeyBbQWxsU291cmNlcy5EQVRBX0lEX1NPVVJDRV06IHNvdXJjZS5pZCB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGZyYWdtZW50Q29udGFpbmVyTGlzdC5hcHBlbmRDaGlsZChub2RlTEkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGZyYWdtZW50Q29udGFpbmVyTGlzdDtcclxuICB9XHJcblxyXG4gIHZpZXdTb3VyY2VzKCkge1xyXG4gICAgY29uc3QgZnJhZ21lbnRTb3VyY2VzID0gdGhpcy5jcmVhdGVTb3VyY2VzKCk7XHJcbiAgICB0aGlzLm5vZGVTb3VyY2VzLmFwcGVuZENoaWxkKGZyYWdtZW50U291cmNlcyk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBTb3VyY2VDb250ZW50IGZyb20gJy4uL3NvdXJjZS1jb250ZW50JztcclxuaW1wb3J0IEZpbHRlclNvdXJjZXMgZnJvbSAnLi4vZmlsdGVyLXNvdXJjZXMnO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlckNsaWNrKGV2ZW50KSB7XHJcbiAgY29uc3QgY2xpY2tFbGVtID0gZXZlbnQudGFyZ2V0O1xyXG5cclxuICBpZiAoY2xpY2tFbGVtLnRhZ05hbWUgPT09ICdMSScpIHtcclxuICAgIGNvbnN0IGlkU291cmNlID0gY2xpY2tFbGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1pZC1zb3VyY2UnKTtcclxuICAgIGNvbnN0IHsgY291bnROZXdzIH0gPSBuZXcgRmlsdGVyU291cmNlcygnLmZpbHRlci1zb3VyY2VzJyk7XHJcbiAgICBjb25zdCBzb3VyY2VDb250ZW50ID0gbmV3IFNvdXJjZUNvbnRlbnQoJy5zb3VyY2UtY29udGVudCcpO1xyXG5cclxuICAgIHRoaXMuY2xpY2tDdXJlbnROb2RlID0gY2xpY2tFbGVtO1xyXG4gICAgc291cmNlQ29udGVudC5yZWRpcmVjdEFydGljbGVzKGlkU291cmNlLCBjb3VudE5ld3MpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHtcclxuICBoYW5kbGVyQ2xpY2ssXHJcbn07XHJcbiIsImltcG9ydCBOZXdzQXBpIGZyb20gJy4vbmV3cy1hcGknO1xyXG5pbXBvcnQgQWxsU291cmNlcyBmcm9tICcuL2NvbXBvbmVudHMvYWxsLXNvdXJjZXMnO1xyXG5pbXBvcnQgU291cmNlQ29udGVudCBmcm9tICcuL2NvbXBvbmVudHMvc291cmNlLWNvbnRlbnQnO1xyXG5pbXBvcnQgRmlsdGVyU291cmNlcyBmcm9tICcuL2NvbXBvbmVudHMvZmlsdGVyLXNvdXJjZXMnO1xyXG5cclxuTmV3c0FwaS5odHRwR2V0QWxsU291cmNlcygpLnRoZW4oKHsgc291cmNlcyB9KSA9PiB7XHJcbiAgY29uc3QgYWxsU291cmNlcyA9IG5ldyBBbGxTb3VyY2VzKCcuYWxsLXNvdXJjZXNfX2xpc3QnKTtcclxuICBjb25zdCBzb3VyY2VDb250ZW50ID0gbmV3IFNvdXJjZUNvbnRlbnQoJy5zb3VyY2UtY29udGVudCcpO1xyXG4gIGNvbnN0IHsgY291bnROZXdzIH0gPSBuZXcgRmlsdGVyU291cmNlcygnLmZpbHRlci1zb3VyY2VzJyk7XHJcblxyXG4gIGFsbFNvdXJjZXMuc291cmNlcyA9IHNvdXJjZXM7XHJcbiAgYWxsU291cmNlcy52aWV3U291cmNlcygpO1xyXG4gIGFsbFNvdXJjZXMuY2xpY2tDdXJlbnROb2RlID0gYWxsU291cmNlcy5ub2RlU291cmNlcy5maXJzdEVsZW1lbnRDaGlsZDtcclxuICBzb3VyY2VDb250ZW50LnJlZGlyZWN0QXJ0aWNsZXMoc291cmNlc1swXS5pZCwgY291bnROZXdzKTtcclxufSk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=